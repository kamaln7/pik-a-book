<div ng-controller="openConversationController">
	<div class="media" ng-repeat="msg in msgs" ng-show="$first">
		<div class="media-left">
			<img ng-src="{{ msg.photo || './user_icon.png' }}" class="media-object user-icon">
		</div>
		<div class="media-body">
			<h2>{{msg.username}}</h2>
		</div>
	</div>
	<table class="table table-hover">
		<tbody>
			<tr ng-repeat="msg in msgs" class="row" ng-style="{'background-color': ( ({{msg.user_id}} == 1) ? '#ffffe6' : '#ffffcc' ) }">
				<td class="text-justify col-sm-6">{{msg.content}}</td>
				<td>
					<span class="time-right col-sm-4">{{msg.timestamp}}</span>
				</td>
				<td>
					<a class="btn btn-danger" ng-click="removeMsg(msg.id)">
						<span class="glyphicon glyphicon-trash"></span><span ng-if="$last">{{ setupPopovers() }}</span>
					</a>
				</td>
			</tr>
		</tbody>
	</table>


	<button class=" btn btn-primary" data-toggle="collapse" data-target="#msgForm">Reply</button>
	<form name="msgForm" id="msgForm" class="collapse" novalidate>
		<div class="form-group">
			<textarea ng-hide="msgFormSuccess" class="form-control" name="msgContent" ng-model="msgContent" rows="3" placeholder="Enter your request"
				ng-minlength="1" ng-maxlength="2000" required
			></textarea>
		</div>
		<div>
			<div class="form-group text-right" ng-hide="msgFormSuccess">
				<button class="btn btn-primary" ng-click="reply()" ng-hide="msgForm.$pristine || msgForm.$invalid">Send</button>
			</div>
		</div>
	</form>
</div>
